type Block @entity {
  id:                                   ID!
  date:                                 String!
  time:                                 BigInt!
  number:                               BigInt!
  hash:                                 String!
  previous:                             String!
  producer:                             String!
  transactions: [Transaction!]! @derivedFrom(field: "block")
}

type Transaction @entity {
  id:                     ID!
  block:                  Block!
  index:                  BigInt!
  hash:                   String!
  elapsed:                BigInt!
  netUsage:               BigInt!
  actions:                [Action!]! @derivedFrom(field: "transaction")
  dbOps:                  [DbOps!]! @derivedFrom(field: "transaction")
  receivers:              [Receiver!]! @derivedFrom(field: "transaction")
  authorizations:         [PermissionLevel!]! @derivedFrom(field: "transaction")
}

type Action @entity {
  id:                       ID!
  ordinal:                  BigInt!
  account:                  String!
  name:                     String!
  jsonData:                 String!
  rawData:                  String!
  transaction:              Transaction!
  block:                    Block!
  dbOps:                    [DbOps!]! @derivedFrom(field: "action")
  authorization:            [PermissionLevel!]! @derivedFrom(field: "action")
}

type DbOps @entity {
  id:                       ID!
  index:                    BigInt!
  operation:                String!
  actionOrdinal:            BigInt!
  code:                     String!
  scope:                    String!
  tableName:                String!
  primaryKey:               String!
  oldData:                  String!
  newData:                  String!
  oldDataJson:              String!
  newDataJson:              String!
  transaction:              Transaction!
  action:                   Action!
}

type Receiver @entity {
  id:                 ID!
  receiver:           String!
  transaction:        Transaction!
}

type PermissionLevel @entity {
  id:                 ID!
  actor:              String!
  permission:         String!
  action:             Action!
  transaction:        Transaction!
}